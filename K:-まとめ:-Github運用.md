最終更新: 2021/12/28

# .mdファイル
### マークダウンの書き方・留意点
- 複雑なリスト（項目・カラムが複数ありそうなものを運用対処している等）はテーブル記法にする
- 👍 絵文字が使える（:の後）ので積極的に活用していきたい

### 改行
- 直接BRタグを書く
- 行末に半角スペースを2つ入れる

特に制限していないが、楽なのは後者。  
**なぜかIssueだと上記がなくても改行される。**

---

# リポジトリ
### 名前の命名ルール
- 半角スペースに当たるものは「-(ハイフン)」を使う
- 「_(アンダーバー)」は意味がない場合は使わない
- 各パートの最初の文字は大文字で始める(このリポジトリもGithub-「o」perationではなくGithub-「O」peration)
- 「__(ダブルアンダーバー)」はユーザーに見せる事を想定しない。ただし例外的にGithub-OperationはGithub就活・転職を支えるシステムのデモンストレーションとして見せる可能性が高い

基本的に上記ルールに基づく

---

# Issue
### 名前の命名ルール
`[リポジトリ名][プロジェクト名]概要`としているが、  
https://github.com/shimajima-eiji/__Github-Operation/issues/54  
を実施すればリポジトリ名が不要になる。

が、あっても邪魔にならないので、システム移行やGithubProjectのBeta版が正式リリース、また運用した時に困らないよう慣例に従う事が望ましい。

なお、複数のプロジェクトに係る場合は`[リポジトリ名][プロジェクト1, プロジェクト2]概要`とすることで解決できる。  
https://github.com/shimajima-eiji/__Github-Operation/issues/29

#### 一つのリポジトリにIssueを集約した弊害と対策
##### 2021/12/28追記
使い方にもよるが、粒度をどのように分けるか？というのが主なところだろう。  
自動化を考えるなら細かく決めたほうが良いし、大雑把に把握したいなら自動化すべきではない。

全てのリポジトリに統一的なマイルストーンを設定するため、一つのリポジトリにIssueを集約するとどのIssueがどのリポジトリに紐づくか判断が難しくなった。
そこで、命名ルールを以下のように変更する

`[リポジトリ名 / 対象リポジトリ名][プロジェクト名]概要`  
例: https://github.com/shimajima-eiji/__Github-Operation/issues/60

各Projectページのリポジトリ検索だとGithub_Operationしか出てこないので、フリーワード検索でリポジトリ別に分けるため、Issueの命名規則に盛り込んだ。

### テンプレート解説
#### プロジェクト
#### タスク

---

# PR
### ブランチ名:`(IssueNo)_(YYYYmmdd)_ver(N)_(ファイル名 or 目的)`
|項目|理由|
|---|---|
|IssueNo|開発はすべてIDDのため、必ずIssueが存在している|
|YYYYmmdd|同じ内容を別日に更新する可能性がある|
|verN|同じ日に同じ内容の修正をする可能性がある|
|ファイル名|何を更新したのか分かりにくい。ファイルが複数存在する場合は目的とする|

### rebase mergeに限定する理由
#### mainに直接pushするパターンはREADME以外にない
運用面の話になるが、RDD or IDDを採用するため、基本的にソースをいじる前にREADMEが変更される。
つまり、mainで変更があるのはREADMEのみであり、作業ブランチはソースファイルのみである。

作業するブランチ内でもREADMEを更新する事はあるかもしれないが、作業前（ブランチを分ける前）にREADMEに書いているはずなので、他の作業ブランチと競合する可能性は低い

**複数の作業ブランチで同一ファイルを編集する事で競合する可能性はある**ので、絶対ではない。

#### 個人開発なのでそもそも複数人が介在することはありえない
そもそも、READMEを更新したとしても、ソースをいじるときはIDD(Issueに従う)で運用性を担保している。
必要であれば、READMEの更新すらIssueに起票する。

#### コミットメッセージは漏れるもの
**※大体の場合、残念ながら漏れる。そのため、PRでcommitNoとIssueを紐づけて管理できるようにする。**
git logでは確認できずとも、PRで確認することができる

#### mergeではgit logが汚染され、squashではfutureブランチのコミットログが圧縮され消えてしまう
単純にGithubのコントリビューションを稼げないというもの。
Github就活・転職を考える上でせっかくのコントリビューションを正しく評価されないのでは意味がないので、squashは論外。
また、後で眺めた時にgit logが汚いと見る気がしなくなるのでmergeも使いたくない、という理由による。

※勘違いしがちだが、チーム開発でrebaseを使うと運用というよりチームメンバー全体への負荷が高まる傾向にあるので、git管理専門のメンバーがいた方がコードの品質が高まる傾向にある。

---

# Wiki
### ページ名の命名ルール
Wikiは階層化が使えないが、階層構造にしたいファイルをネスト前の名前と同じ名前をプレフィックスにすると階層構造を疑似的に構築できる。  
https://github.com/shimajima-eiji/__Github-Operation/wiki/K:-%E3%81%BE%E3%81%A8%E3%82%81:-Wiki%E3%81%AE%E4%BB%95%E6%A7%98%E3%81%A8%E9%81%8B%E7%94%A8

|大分類|タイトル表記|備考|
|---|---|---|
|Repository|R:リポジトリ名:テーマ||
|Project|P:プロジェクト名:テーマ||
|Estimate|E:大分類:項目|考察関連。大分類も必須なので運用時注意|
|Knowledge|K:任意カテゴリ名:テーマ||
|Other|O:テーマ|基本的に不使用だが、上記以外にも増える可能性有|

順番が必要なものは、テーマに1.のようにラベリングしている。  
また、リポジトリやプロジェクトでテーマがないものは、READMEとしての位置付けである。

### 見出しの書き方
サイドバー(Pages)のアコーディオンを展開した時にどう見えるか、という点を考慮している。  
リッチテキストエディタではh3までしか対応していないが、h4以降も使えるようだ。

ただし、見え方についてはページレイアウトの都合もあるので、基本的にh2から始めるようにしている。

---

# プロジェクト
### 名前の命名ルール
プロジェクトのマイルストーンについて、管理を楽にするため複数リポジトリでIssueを書かず、このリポジトリで全てのリポジトリのIssueやWikiを管理する方針にした。  
これにより、命名は至ってシンプルになった。  
https://github.com/shimajima-eiji/__Github-Operation/issues/59

### リポジトリに紐づくプロジェクトを廃止し、ユーザーに紐づくプロジェクトを採用した理由
まず、それぞれの違いを見ていく。  

|項目|リポジトリ|ユーザー|Beta|備考|
|---|---|---|---|
|リポジトリにプロジェクトを作成する|●|●|-|Betaが出来ないのは意外だった。デグレ？|
|ユーザーにプロジェクトを作成する|-|●|●|これは当然か|
|異なるリポジトリのIssueを参照する|-|●|●|これは趣旨から考えても当然か|
|マイルストーンを作成|●|-|-|現状、マイルストーンはIssueのみ対応している|
|テーブル一覧|-|-|●|Beta版の主要な機能と言える|

テーブル一覧機能が非常に便利なので、これを積極的に活用していきたいが、マイルストーンを使いたいのでこの時点でバッティングしている。  
これの解決策が

1. Betaプロジェクトであること
1. 一つのリポジトリにIssueを集約すること

だった。

### カラム解説
以下プロジェクトを例に解説する。  
https://github.com/users/shimajima-eiji/projects/4/views/7

先行して解説記事を書いているので、以下も参考にされたし。  
https://qiita.com/nomurasan/items/bdecca0f0a4397cbd6ca

#### 検討/振り分け中

---

# 複合ケース
### [Issue][Wiki]一つのリポジトリだけしか使わせない理由
複数のリポジトリで１つのプロジェクトを運用していた時に、Wikiを複数のリポジトリで活用していた際に「あのファイルはどこだっけ？」問題が発生してしまった。  
そこで、Github Wikiはこのリポジトリだけで運用し、他のリポジトリのWikiもすべて兼ねるようにする。

ただし、管理が煩雑になるデメリットもあるので、個人開発ならいざ知らずチーム開発では採用すべきではない。  
https://github.com/shimajima-eiji/__Github-Operation/issues/59
